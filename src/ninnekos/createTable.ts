import { GraphQLClient } from 'graphql-request';
import '../db';
import query from '../query/index';
import ninnekos from '.';

(async () => {
    const endpoint = 'https://api.ninneko.com/graphql';

    const graphClient = new GraphQLClient(endpoint, { headers: {} });
    const ids = [15];
    // const ids = [
    //     15, 39, 74, 672, 724, 971, 1168, 1337, 1655, 2071, 2303, 2421, 2450,
    //     2523, 2863, 3020, 3649, 3681, 4263, 4472, 4496, 4668, 5916, 6370, 6489,
    //     6820, 7283, 7656, 7826, 7848, 8090, 8472, 8527, 8710, 8778, 8845, 9317,
    //     9322, 9391, 9412, 9470, 9740, 9972, 9983, 10008, 10125, 10139, 10285,
    //     10302, 10430, 10443, 10473, 10565, 10581, 10624, 10672, 11008, 11158,
    //     11677, 11735, 11978, 12077, 12138, 12210, 12220, 12318, 12556, 12840,
    //     12856, 12885, 13485, 13611, 13613, 13769, 13851, 13892, 13984, 14028,
    //     14036, 14100, 14320, 14346, 14697, 14737, 14771, 14783, 15005, 15120,
    //     15134, 15193, 15195, 15232, 15350, 15351, 15533, 16032, 16085, 16098,
    //     16173, 16393, 16428, 16450, 16832, 16996, 17176, 17213, 17283, 17332,
    //     17346, 17414, 17429, 17510, 17553, 17624, 17754, 17934, 18085, 18149,
    //     18191, 18221, 18281, 18285, 18345, 18406, 18574, 18612, 18636, 18831,
    //     18933, 19360, 19383, 19399, 19459, 19499, 19954, 19974, 19990, 20024,
    //     20120, 20122, 20180, 20234, 20247, 20284, 20589, 20649, 20659, 20755,
    //     20759, 20797, 20830, 20854, 20857, 20905, 20921, 20959, 21026, 21064,
    //     21182, 21205, 21240, 21243, 21350, 21406, 21494, 21495, 21532, 21567,
    //     21674, 21689, 21759, 21914, 22004, 22035, 22068, 22125, 22154, 22155,
    //     22157, 22240, 22369, 22373, 22465, 22468, 22470, 22494, 22510, 22577,
    //     22659, 22709, 22711, 22741, 22747, 22753, 22758, 22793, 22806, 22822,
    //     22823, 22829, 22836, 22837, 22928, 23000, 23033, 23069, 23102, 23169,
    //     23172, 23199, 23226, 23239, 23333, 23510, 23523, 23524, 23700, 23707,
    //     23761, 23851, 23907, 24062, 24338, 24357, 24450, 24472, 24515, 24517,
    //     24527, 24530, 24532, 24571, 24603, 24624, 24660, 24661, 24698, 24821,
    //     24848, 24859, 24878, 24904, 24931, 24937, 24985, 25185, 25186, 25229,
    //     25235, 25246, 25249, 25265, 25266, 25272, 25286, 25287, 25329, 25363,
    //     25364, 25368, 25372, 25395, 25415, 25416, 25435, 25461, 25547, 25673,
    //     25685, 25692, 25737, 25745, 25749, 25769, 25774, 25775, 25777, 25782,
    //     25784, 25785, 25790, 25792, 25801, 25805, 25809, 25812, 25821,
    // ];

    try {
        console.log('Started refreshing ninnekos on DB.');
        // for (const id of ids) {
        //     const data = await graphClient.request(query.pet, { id });
        //     console.log(data.pet);
        //     await ninnekos.insertDB(
        //         data.pet,
        //         graphClient,
        //         null,
        //         null,
        //         null,
        //         null
        //     );
        // }

        await ninnekos.add(graphClient);

        console.log('Successfully refreshed ninnekos on DB.');
    } catch (error) {
        console.error(error);
    }
})();
